# ParaView Visualization Guide

This guide walks you through visualizing the segmented aorta, and backtransformed anomaly scores using ParaView.

## Steps for Visualization

### 1. Load Backtransformed Anomaly Scores
- Navigate to `Results/Evaluation/{architecture}/masked_slice/test/outputs_backtransformed` and load the backtransformed anomaly scores. Ensure that these scores have been generated by running `inference_test.py` for backtransformation.

### 2. Load Subject Segmentation Data
- Load the segmentation data of a subject from `data/inselspital/kady/preprocessed/(controls or patients)/vtk_scaled/{subject_id}`. Open the file with a name pattern like `seg_...._velocity.vtk`.

### 3. Display Segmentation with Thresholding
- Apply the **Threshold** filter to the segmentation data and set the lower threshold just above zero (e.g., `0.001`). This will help remove any zero values and display the aorta.
- Adjust the color settings to a solid color and set the opacity to your preference for better visualization.

### 4. Smoothen the Aorta
To improve the appearance of the aorta:

- **Select 'Cells On'**: Highlight the aorta as a region. Note: You may need to select several regions individually. Use the green plus sign in the layout to add selections.
- Apply the **Extract Selection** filter to isolate the chosen region.
- Use the **Extract Surface** filter to create a surface representation.
- Apply the **Smooth** filter and set the number of iterations (e.g., `500`) for better smoothness.
- To handle any gaps across time steps, use the **Extract Time Steps** filter after smoothing.

### 5. Visualize Anomaly Scores
- Apply the **Threshold** filter to the backtransformed anomaly scores and set the lower threshold above zero (e.g., `1e-6`). This ensures only significant non-zero values are shown.
- For smoother visualization, use the **Resample to Image** filter and set the display mode to **Volume** for better representation.

### 6. Visualize Flow Using Glyph Filter
- To visualize the flow in the data, apply the **Glyph** filter:
  - Select the loaded velocity field data (e.g., `seg_...._velocity.vtk`).
  - Apply the **Glyph** filter from the filter menu.
  - Configure the glyph settings:
    - Set the **Glyph Type** to **Arrow**.
    - Adjust the **Scale Factor** to control the size of the arrows for better visualization.
- This step will display arrows representing the direction and magnitude of the flow within the aorta. Adjust the scale and density as needed to match your visualization preference.

    

## Additional Tips
- **Opacity and Color Adjustments**: Modify the opacity settings and color maps to differentiate between the segmented aorta and anomaly scores.
- **Camera Views**: Use the camera control to adjust views for a clear look at the data from different angles.
- **Saving State**: Save the state file of your project to preserve the visualization setup for future use.


